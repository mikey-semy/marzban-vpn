# üîí –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –¥–ª—è Marzban VPN

## üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ)

### 1. **Let's Encrypt —á–µ—Ä–µ–∑ Dokploy** ‚≠ê –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ 2 –∫–ª–∏–∫–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –í Dokploy ‚Üí Projects ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Domains
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω: `vpn.yourdomain.com`
3. –í–∫–ª—é—á–∏—Ç–µ "Generate SSL Certificate"
4. –í—ã–±–µ—Ä–∏—Ç–µ "Let's Encrypt"
5. ‚úÖ –ì–æ—Ç–æ–≤–æ!

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
DISABLE_INTERNAL_SSL=true
```

### 2. **Cloudflare SSL** ‚≠ê + –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫
- ‚úÖ CDN —É—Å–∫–æ—Ä–µ–Ω–∏–µ
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ IP —Å–µ—Ä–≤–µ—Ä–∞

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Cloudflare](https://cloudflare.com)
2. –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω
3. –ò–∑–º–µ–Ω–∏—Ç–µ NS —Å–µ—Ä–≤–µ—Ä—ã —É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. –í DNS —Å–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å—å: `vpn` ‚Üí `IP_—Å–µ—Ä–≤–µ—Ä–∞`
5. –í–∫–ª—é—á–∏—Ç–µ "Proxy" (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞–∫–æ ‚òÅÔ∏è)
6. SSL/TLS ‚Üí "Full (strict)"

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
DISABLE_INTERNAL_SSL=true
```

### 3. **Let's Encrypt –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù–µ—Ç Traefik/Cloudflare
- –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ certbot
apt update && apt install certbot

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
certbot certonly --standalone \
  --preferred-challenges http \
  --email your@email.com \
  --agree-tos \
  --no-eff-email \
  -d vpn.yourdomain.com

# –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
echo "0 12 * * * /usr/bin/certbot renew --quiet" | crontab -
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```env
DISABLE_INTERNAL_SSL=false
USE_LETSENCRYPT_CERTS=true
LETSENCRYPT_CERT_PATH=/etc/letsencrypt/live/vpn.yourdomain.com/fullchain.pem
LETSENCRYPT_KEY_PATH=/etc/letsencrypt/live/vpn.yourdomain.com/privkey.pem
DOMAIN=vpn.yourdomain.com
```

**docker-compose –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:**
```yaml
volumes:
  - /etc/letsencrypt:/etc/letsencrypt:ro
```

## üí∞ –ü–ª–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –æ—Å–æ–±—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

### 1. **Sectigo PositiveSSL** - ~$8/–≥–æ–¥
- ‚úÖ –ì–æ–¥–æ–≤–æ–π —Å—Ä–æ–∫ (–Ω–µ 90 –¥–Ω–µ–π)
- ‚úÖ –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- üõí [–ö—É–ø–∏—Ç—å](https://sectigo.com)

### 2. **Namecheap SSL** - ~$6/–≥–æ–¥
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ Unlimited reissues
- üõí [–ö—É–ø–∏—Ç—å](https://namecheap.com/ssl)

### 3. **GoGetSSL** - ~$3/–≥–æ–¥
- ‚úÖ –°–∞–º—ã–µ –¥–µ—à–µ–≤—ã–µ —Ü–µ–Ω—ã
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
- üõí [–ö—É–ø–∏—Ç—å](https://gogetssl.com)

## üîß –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã SSL –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –†–µ–∂–∏–º 1: Traefik/Cloudflare (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```env
DISABLE_INTERNAL_SSL=true
```
- Marzban —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP
- SSL –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–∫—Å–∏

### –†–µ–∂–∏–º 2: Let's Encrypt –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```env
USE_LETSENCRYPT_CERTS=true
LETSENCRYPT_CERT_PATH=/path/to/fullchain.pem
LETSENCRYPT_KEY_PATH=/path/to/privkey.pem
```
- Marzban —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

### –†–µ–∂–∏–º 3: –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
```env
DISABLE_INTERNAL_SSL=false
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚ö†Ô∏è –ë—Ä–∞—É–∑–µ—Ä—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

## üèÜ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ Dokploy:
1. **Let's Encrypt —á–µ—Ä–µ–∑ Dokploy** - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π
2. **Cloudflare** - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞

### –î–ª—è VPS –±–µ–∑ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **Cloudflare** - —Å–∫—Ä—ã–≤–∞–µ—Ç IP —Å–µ—Ä–≤–µ—Ä–∞
2. **Let's Encrypt + Certbot** - –µ—Å–ª–∏ IP –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω

### –î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. **–ü–ª–∞—Ç–Ω—ã–µ SSL** - –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
2. **Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** - –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (5 –º–∏–Ω—É—Ç):**

1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å –Ω–∞ [Cloudflare](https://cloudflare.com)
2. –î–æ–±–∞–≤–ª—è–µ—Ç–µ –¥–æ–º–µ–Ω –∏ –º–µ–Ω—è–µ—Ç–µ NS
3. –°–æ–∑–¥–∞–µ—Ç–µ A-–∑–∞–ø–∏—Å—å —Å –ø—Ä–æ–∫—Å–∏ ‚òÅÔ∏è
4. –í .env —Å—Ç–∞–≤–∏—Ç–µ `DISABLE_INTERNAL_SSL=true`
5. ‚úÖ –ì–æ—Ç–æ–≤–æ! SSL —Ä–∞–±–æ—Ç–∞–µ—Ç + –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üîí –í–∞–ª–∏–¥–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫
- üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CDN
- üé≠ –°–∫—Ä—ã—Ç—ã–π —Ä–µ–∞–ª—å–Ω—ã–π IP —Å–µ—Ä–≤–µ—Ä–∞

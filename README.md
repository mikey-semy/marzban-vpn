# Marzban VPN Panel ั WARP ะดะปั Dokploy

ะะพะปะฝะพัะตะฝะฝะฐั VPN ะฟะฐะฝะตะปั ะฝะฐ ะฑะฐะทะต Marzban ั ะฟะพะดะดะตัะถะบะพะน WARP ะดะปั ะพะฑัะพะดะฐ ะฑะปะพะบะธัะพะฒะพะบ ะฟะพะฟัะปััะฝัั ัะตัะฒะธัะพะฒ, ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะฐั ะดะปั ัะฐะทะฒะตัััะฒะฐะฝะธั ะฒ Dokploy ั Traefik.

## ๐ ะะพะทะผะพะถะฝะพััะธ

- **Marzban Panel** - ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั VPN ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
- **WARP Integration** - ะฐะฒัะพะผะฐัะธัะตัะบะธะน ัะพััะธะฝะณ ัะตัะตะท Cloudflare WARP ะดะปั ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัั ัะตัะฒะธัะพะฒ
- **ะะฝะพะถะตััะฒะตะฝะฝัะต ะฟัะพัะพะบะพะปั**: VMess, VLESS, Trojan, Shadowsocks
- **Reality Protocol** - ัะพะฒัะตะผะตะฝะฝะฐั ะทะฐัะธัะฐ ะพั DPI
- **MySQL Database** - ะฝะฐะดะตะถะฝะพะต ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั
- **Telegram Bot** - ัะฒะตะดะพะผะปะตะฝะธั ะธ ัะฟัะฐะฒะปะตะฝะธะต
- **Dokploy/Traefik** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต SSL ัะตััะธัะธะบะฐัะฐะผะธ
- **ะะตััะธััะตะฝัะฝะฐั ะบะพะฝัะธะณััะฐัะธั** - ัะพััะฐะฝะตะฝะธะต ะฝะฐัััะพะตะบ ะฟัะธ ะฟะตัะตะทะฐะฟััะบะต

## ๐ ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะฟัะพัะพะบะพะปั

| ะัะพัะพะบะพะป | TCP ะฟะพัั | WS ะฟะพัั | ะะฟะธัะฐะฝะธะต |
|----------|----------|---------|----------|
| VMess | 2053 | 2083 | ะะพะฟัะปััะฝัะน ะฟัะพัะพะบะพะป V2Ray |
| VLESS | 2054 | 2084 | ะะตะณะบะพะฒะตัะฝะฐั ะฒะตััะธั VMess |
| VLESS Reality | 2443 | - | ะกะพะฒัะตะผะตะฝะฝะฐั ะทะฐัะธัะฐ ะพั DPI |
| Trojan | 2055 | 2085 | ะะผะธัะฐัะธั HTTPS ััะฐัะธะบะฐ |
| Shadowsocks | 1080 | - | ะะปะฐััะธัะตัะบะธะน SOCKS5 ะฟัะพะบัะธ |

## ๐ WARP ัะพััะธะฝะณ

ะะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐะฟัะฐะฒะปัะตั ััะฐัะธะบ ัะตัะตะท WARP ะดะปั:
- OpenAI (ChatGPT)
- Google ัะตัะฒะธัั
- YouTube
- Netflix
- Instagram
- Facebook
- Twitter/X
- Discord
- Telegram
- Spotify
- TikTok

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะฒ Dokploy

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/mikey-semy/marzban-vpn.git
cd marzban-vpn
```

### 2. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต `.env` ัะฐะนะป ะฝะฐ ะพัะฝะพะฒะต ะฟัะธะผะตัะฐ:

```bash
cp .env.example .env
nano .env
```

ะะฑัะทะฐัะตะปัะฝะพ ะธะทะผะตะฝะธัะต:
- `SUDO_USERNAME` ะธ `SUDO_PASSWORD` - ะดะปั ะฒัะพะดะฐ ะฒ ะฟะฐะฝะตะปั
- `MYSQL_PASSWORD` ะธ `MYSQL_ROOT_PASSWORD` - ะฟะฐัะพะปะธ ะดะปั MySQL
- `TELEGRAM_API_TOKEN` ะธ `TELEGRAM_ADMIN_ID` - ะดะปั ัะฒะตะดะพะผะปะตะฝะธะน
- `XRAY_SUBSCRIPTION_URL_PREFIX` - ะฒะฐั ะดะพะผะตะฝ

### 3. ะกะพะทะดะฐะฝะธะต ะฟัะพะตะบัะฐ ะฒ Dokploy

1. ะะพะนะดะธัะต ะฒ ะฟะฐะฝะตะปั Dokploy
2. ะกะพะทะดะฐะนัะต ะฝะพะฒัะน ะฟัะพะตะบั ัะธะฟะฐ "Compose"
3. ะฃะบะฐะถะธัะต ัะตะฟะพะทะธัะพัะธะน: `https://github.com/mikey-semy/marzban-vpn.git`
4. ะฃััะฐะฝะพะฒะธัะต ัะฐะนะป compose: `docker-compose.marzban.yml`

### 4. ะะฐัััะพะนะบะฐ ะดะพะผะตะฝะฐ ะฒ Dokploy

1. ะ ะฝะฐัััะพะนะบะฐั ะฟัะพะตะบัะฐ ะดะพะฑะฐะฒััะต ะดะพะผะตะฝ (ะฝะฐะฟัะธะผะตั: `vpn.yourdomain.com`)
2. ะะบะปััะธัะต SSL ัะตัะตะท Let's Encrypt
3. Dokploy ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัััะพะธั Traefik labels

### 5. ะะฐะฟััะบ WARP ะฟัะพะบัะธ

ะัะดะตะปัะฝะพ ะทะฐะฟัััะธัะต WARP ะฟัะพะบัะธ:

```bash
docker-compose -f docker-compose.warp.yml up -d
```

### 6. ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฒ Dokploy

1. ะะฐะถะผะธัะต "Deploy" ะฒ ะฟะฐะฝะตะปะธ Dokploy
2. ะะพะถะดะธัะตัั ะทะฐะฒะตััะตะฝะธั ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ ะบะพะฝัะตะนะฝะตัะพะฒ

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะัะฝะพะฒะฝัะต ัะฐะนะปั

- `Dockerfile` - ะบะฐััะพะผะฝัะน ะพะฑัะฐะท ั ะฟะตััะธััะตะฝัะฝะพะน ะบะพะฝัะธะณััะฐัะธะตะน
- `docker-entrypoint.sh` - ัะบัะธะฟั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ
- `config.json` - ัะฐะฑะปะพะฝ ะบะพะฝัะธะณััะฐัะธะธ Xray ั ัะพััะธะฝะณะพะผ
- `docker-compose.marzban.yml` - ะพัะฝะพะฒะฝัะต ัะตัะฒะธัั (Marzban + MySQL)
- `docker-compose.warp.yml` - WARP ะฟัะพะบัะธ
- `.env` - ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

### ะะตััะธััะตะฝัะฝัะต ัะพะผะฐ

- `marzban_data` - ะดะฐะฝะฝัะต Marzban (ะฑะฐะทะฐ ะดะฐะฝะฝัั, ะปะพะณะธ)
- `marzban_configs` - ะบะพะฝัะธะณััะฐัะธะธ Xray
- `marzban_logs` - ะปะพะณะธ Xray
- `mysql_data` - ะดะฐะฝะฝัะต MySQL

### ะะฝัะตะณัะฐัะธั ั WARP

ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะดะปั WARP:
```env
WARP_ENABLED=true
WARP_HOST=warp-proxy
WARP_PORT=1080
```

## ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท Dokploy

### ะะตะฑ-ะฟะฐะฝะตะปั
- URL: `https://yourdomain.com/dashboard/`
- ะะพะณะธะฝ: ะธะท `SUDO_USERNAME`
- ะะฐัะพะปั: ะธะท `SUDO_PASSWORD`

### ะะพะผะฐะฝะดั ัะตัะตะท Dokploy ัะตัะผะธะฝะฐะป

```bash
# ะัะพัะผะพัั ะปะพะณะพะฒ
docker logs marzban -f
docker logs warp-proxy -f

# ะะตัะตะทะฐะฟััะบ ัะตัะฒะธัะพะฒ (ัะตัะตะท Dokploy UI)
# Projects -> Your Project -> Redeploy

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ WARP
docker exec warp-proxy curl -s https://www.cloudflare.com/cdn-cgi/trace
```

### ะะฑะฝะพะฒะปะตะฝะธะต

1. ะ Dokploy ะฟะตัะตะนะดะธัะต ะบ ะฟัะพะตะบัั
2. ะะฐะถะผะธัะต "Redeploy"
3. ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดััะฝะตั ะธะทะผะตะฝะตะฝะธั ะธะท ัะตะฟะพะทะธัะพัะธั

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธะน

```bash
# ะะบัะธะฒะฝัะต ะฟะพะดะบะปััะตะฝะธั
netstat -an | grep :2053
netstat -an | grep :2054

# ะกัะฐัะธััะธะบะฐ ััะฐัะธะบะฐ
docker exec marzban cat /var/log/xray/access.log
```

### WARP ััะฐััั

```bash
docker exec warp-proxy curl -s ipinfo.io
```

### Dokploy ะผะพะฝะธัะพัะธะฝะณ

ะ ะฟะฐะฝะตะปะธ Dokploy ะดะพัััะฟะฝั:
- ะะตััะธะบะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ
- ะะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะกัะฐััั ัะตัะฒะธัะพะฒ
- ะััะพัะธั ัะฐะทะฒะตัััะฒะฐะฝะธะน

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### ะะตะบะพะผะตะฝะดะฐัะธะธ

- ะัะฟะพะปัะทัะนัะต ัะธะปัะฝัะต ะฟะฐัะพะปะธ ะฒ `.env`
- ะะฐัััะพะนัะต ัะฐะนัะฒะพะป ัะตัะตะท Dokploy
- ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ะพะฑัะฐะทั ัะตัะตะท Redeploy
- ะัะฟะพะปัะทัะนัะต SSL ัะตััะธัะธะบะฐัั Let's Encrypt (ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒ Dokploy)

### Firewall ะฝะฐัััะพะนะบะธ

ะ Dokploy ะธะปะธ ะฝะฐ ัะตัะฒะตัะต:

```bash
# ะะฐะทัะตัะธัั ัะพะปัะบะพ ะฝัะถะฝัะต ะฟะพััั
ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP (Traefik)
ufw allow 443/tcp   # HTTPS (Traefik)
ufw allow 1080/tcp  # Shadowsocks
ufw allow 2053:2055/tcp  # VMess, VLESS, Trojan
ufw allow 2083:2085/tcp  # WebSocket
ufw allow 2443/tcp  # Reality
ufw enable
```

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### Marzban ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัะธัั ะปะพะณะธ ะฒ Dokploy
# Projects -> Your Project -> Logs

# ะะปะธ ัะตัะตะท ัะตัะผะธะฝะฐะป
docker logs marzban

# ะัะพะฒะตัะธัั ะฑะฐะทั ะดะฐะฝะฝัั
docker exec mysql mysql -u root -p -e "SHOW DATABASES;"
```

### WARP ะฝะต ัะฐะฑะพัะฐะตั

```bash
# ะะตัะตะทะฐะฟััะบ WARP
docker restart warp-proxy

# ะัะพะฒะตัะบะฐ ะฟะพะดะบะปััะตะฝะธั
docker exec warp-proxy curl -s ipinfo.io
```

### ะัะพะฑะปะตะผั ั ะบะพะฝัะธะณััะฐัะธะตะน

ะะพะฝัะธะณััะฐัะธั Xray ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพััะฐะฝัะตััั ะฒ ะฟะตััะธััะตะฝัะฝะพะผ ัะพะผะต:
- ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต ัะพะทะดะฐะตััั ะธะท ัะฐะฑะปะพะฝะฐ `config.json`
- ะัะธ ะฟะพะฒัะพัะฝัั ะทะฐะฟััะบะฐั ะธัะฟะพะปัะทัะตััั ัะพััะฐะฝะตะฝะฝะฐั ะบะพะฝัะธะณััะฐัะธั
- ะัะธ ะพัะธะฑะบะฐั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐะตััั ะธะท ัะฐะฑะปะพะฝะฐ

### Traefik/SSL ะฟัะพะฑะปะตะผั

1. ะัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ ะดะพะผะตะฝะฐ ะฒ Dokploy
2. ะฃะฑะตะดะธัะตัั ััะพ DNS ัะบะฐะทัะฒะฐะตั ะฝะฐ ะฒะฐั ัะตัะฒะตั
3. ะัะพะฒะตัััะต ะปะพะณะธ Traefik ะฒ Dokploy

## ๐ ะะพะณะธ

ะะพะณะธ ะดะพัััะฟะฝั ะฒ Dokploy ะธะปะธ ัะตัะตะท ะบะพะผะฐะฝะดั:
- Marzban: `docker logs marzban`
- MySQL: `docker logs mysql`
- WARP: `docker logs warp-proxy`
- Xray: ะฒ ัะพะผะต `/var/log/xray/`

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Traefik       โโโโโโ   Marzban    โโโโโโ   MySQL     โ
โ   (SSL/Proxy)   โ    โ   (Panel)    โ    โ   (DB)      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
                              โ
                       โโโโโโโโโโโโโโโโ
                       โ   WARP       โ
                       โ   (Proxy)    โ
                       โโโโโโโโโโโโโโโโ
```

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:

1. ะัะพะฒะตัััะต ะปะพะณะธ ะฒ Dokploy
2. ะฃะฑะตะดะธัะตัั ััะพ ะฒัะต ะฟะพััั ะพัะบัััั
3. ะัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ DNS
4. ะัะพะฒะตัััะต ะบะพะฝัะธะณััะฐัะธั `.env`
5. ะัะฟะพะปัะทัะนัะต ััะฝะบัะธั Redeploy ะฒ Dokploy

## ๐ ะะธัะตะฝะทะธั

MIT License - ะธัะฟะพะปัะทัะนัะต ัะฒะพะฑะพะดะฝะพ ะดะปั ะปะธัะฝัั ะธ ะบะพะผะผะตััะตัะบะธั ัะตะปะตะน.

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
marzban-vpn/
โโโ Dockerfile                    # ะะฐััะพะผะฝัะน ะพะฑัะฐะท ั ะฟะตััะธััะตะฝัะฝะพะน ะบะพะฝัะธะณััะฐัะธะตะน
โโโ docker-entrypoint.sh         # ะกะบัะธะฟั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ
โโโ docker-compose.marzban.yml   # ะัะฝะพะฒะฝัะต ัะตัะฒะธัั
โโโ docker-compose.warp.yml      # WARP ะฟัะพะบัะธ
โโโ config.json                  # ะจะฐะฑะปะพะฝ ะบะพะฝัะธะณััะฐัะธะธ Xray
โโโ .env.example                 # ะัะธะผะตั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
โโโ README.md                    # ะะพะบัะผะตะฝัะฐัะธั
```
